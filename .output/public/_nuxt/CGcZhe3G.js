import{M as $}from"./_O3UyVST.js";import{p as h,ci as I,r as A,e as v,cj as g,u as P}from"./DqP3LHpI.js";const f=(t,r="success",e="Success")=>{r=r.toLowerCase(),(!e||e.length==0||r!="success")&&(e=r.substring(0,1).toUpperCase()+r.substring(1)),$[r]({message:e,description:t,placement:"topRight",duration:3})},C=h("cart-store",{state:()=>({stateCartItems:[]}),actions:{addToCart(t){const r=this.stateCartItems.find(e=>e.id===t.id);r?r.quantity++:(t.quantity=1,this.stateCartItems.push(t))},removeFromCart(t){this.stateCartItems.splice(t,1)},clearCart(){this.stateCartItems=[]}},getters:{cartItems:t=>t.stateCartItems,total:t=>t.stateCartItems.reduce((r,e)=>r+e.price*e.quantity,0)},persist:{storage:I.sessionStorage()}});function p(t){return t=Array.isArray(t)?t[0]:t,g.find(r=>[r.slug,...r.slugs||[]].includes(t))}function b(t={}){var d,m,l;if(!t)return`/${g[0].slug}`;const{id:r,name:e,model_number:n,categories_json:s}=t,a=(l=p((m=(d=s==null?void 0:s[0])==null?void 0:d.parent_name_with_slashes)==null?void 0:m.split("/")[0]))==null?void 0:l.slug,u=c(e),i=c(n);return a?`/${a}/product/${r}/${u}-${i}`:`/product/${r}/${u}-${i}`}const o=A(!1),N=v(()=>o.value?"Adding...":"Add to Cart");function _(t){if(o.value)return;o.value=!0;const r=C();try{r.addToCart(t),f("Item added to cart","success")}catch(e){console.error(e),f("An error occurred. Please try again","error")}finally{o.value=!1}}const y=(t,r,e)=>{const n=P(),s=p(n.params.segment),a=c(r);return e?s?`/${s.slug}/${t}/${a}/page/${e}`:`/product/${t}/${a}/page/${e}`:s?`/${s.slug}/${t}/${a}`:`/product/${t}/${a}`},c=t=>t?t.replace(/ /g,"-").replace(/\//g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"").toLowerCase():"";function F(t){C().removeFromCart(t)}function M(t){return typeof t=="string"&&(t=parseFloat(t)),new Intl.NumberFormat("en-KE").format(t)}function x(t,r){return Math.round((t-r)/t*100)}function L(t){const r=["and","the","of","in","on","at","to","a","an"];return t.split(" ").map(e=>r.includes(e)?e:e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}export{_ as a,y as b,L as c,p as d,x as e,M as f,b as g,N as h,F as r,C as u};
