import{_ as de}from"./DdmrsCq-.js";import{_ as ue}from"./DvOC_zPQ.js";import{_ as ve}from"./CUxsIAhZ.js";import{_ as ge}from"./aA96lYGm.js";import{c as J,g as E,a as pe,b as O}from"./DZecjCsZ.js";import{a as me}from"./D2eelCs_.js";import{u as _e,r as n,e as F,f as he,g as K,h as be,c,a as e,b as g,w as p,t as d,i as r,j as V,k as w,l as Q,v as fe,d as v,m as ke,n as ye,F as M,p as B,q as I,o as i,A as Ce}from"./BhgO3_os.js";import{u as we}from"./2nxpqKD9.js";import{u as Pe}from"./D2XM4M9u.js";import"./D6YHLAxY.js";import"./BneLoQMV.js";const xe={class:"main"},Le={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},Ne={class:"container d-flex align-items-center"},Se={class:"breadcrumb"},Ae={class:"breadcrumb-item"},Ve={class:"breadcrumb-item"},Me={class:"breadcrumb-item active","aria-current":"page"},Be={class:"page-content"},Te={class:"container"},$e={class:"row"},De={class:"col-lg-10"},Ee={class:"toolbox"},Oe={class:"toolbox-left"},Fe={class:"toolbox-info"},Ie={class:"toolbox-right"},je={class:"toolbox-sort"},qe={class:"select-custom"},ze={class:"main-content"},He={key:1,class:"products mb-3 products-section"},Ue={class:"row"},Ze={class:"product product-7 text-center"},Ge={class:"product-media"},Re={class:"product-action"},We=["onClick"],Je={class:"product-body"},Ke={class:"product-cat"},Qe={class:"product-title"},Xe={"aria-label":"Page navigation"},Ye={class:"pagination justify-content-center"},et={class:"page-item-total"},tt={class:"col-lg-2 order-lg-first"},at={class:"sidebar sidebar-shop sidebar-shop-category"},st={key:0,class:"widget widget-collapsible"},ot={id:"widget-1",class:"show"},lt={class:"widget-body"},it={class:"filter-items filter-items-count"},nt={class:"custom-control custom-checkbox"},rt=["id","value","onChange"],ct=["for"],dt={class:"item-count"},ut={class:"widget widget-collapsible"},vt={id:"widget-4",class:"show"},gt={class:"widget-body"},pt={class:"filter-items"},mt={class:"custom-control custom-checkbox"},_t=["id","value","onChange"],ht=["for"],Vt={__name:"[...slug]",setup(bt){const N=_e(),{segment:j,id:f}=N.params,q=Array.isArray(N.params.slug)?N.params.slug:[N.params.slug],X=q[0],k=q[2],{api:Y,loading:P}=we(),z=n(`${J(j)} - ${J(X)}`),S=F(()=>Ce.find(a=>a.slug===j));Pe({title:z,meta:[{name:"description",content:z}]});const l=n(k?parseInt(k):1),H=n(12),T=n(0),m=n([]),U=n(0),_=n(f?parseInt(f):1),$=n([]),Z=n([]),u=n([]),h=n([]),b=n([]),A=n(""),D=async()=>{try{const a={[_.value]:h.value[_.value]||[]};h.value=a;const t={[_.value]:b.value[_.value]||[]};b.value=t;const o=await Y.get("/api/get-products",{params:{page:l.value,per_page:H.value,category_id:_.value,checkedCategories:h.value,checkedBrands:b.value,selectedSortOption:A.value}});m.value=o.data.products.data,T.value=o.data.products.total,U.value=o.data.products.per_page,$.value=o.data.categories,Z.value=o.data.brands,u.value=o.data.the_category}catch(a){console.error(a)}};function ee(a){let t=u.value.id;t in h.value||(h.value[t]=[]);const o=h.value[t];o.includes(a)?o.splice(o.indexOf(a),1):o.push(a)}function te(a){let t=u.value.id;t in b.value||(b.value[t]=[]);const o=b.value[t];o.includes(a)?o.splice(o.indexOf(a),1):o.push(a)}function ae(){document.querySelectorAll('input[type="checkbox"]').forEach(t=>{t.checked=!1}),h.value=[],b.value=[],A.value=null}const x=F(()=>Math.ceil(T.value/H.value)),G=n([]),se=()=>{l.value>1&&l.value--},oe=()=>{l.value<x.value&&l.value++},le=a=>{l.value=a},ie=()=>{G.value=m.value},ne=a=>Number.isInteger(a),re=F(()=>{const a=[];l.value>1&&a.push("Prev");let o=Math.max(1,l.value-Math.floor(5/2)),y=Math.min(o+5-1,x.value);y-o<4&&(o=Math.max(1,y-5+1));for(let L=o;L<=y;L++)a.push(L);return l.value<x.value&&a.push("Next"),a});return he(()=>{D()}),K(l,D),K(m,ie),be(()=>{f!==""&&_.value!==f&&(l.value=1,_.value=f?parseInt(f):1,k!==""&&l.value!==k&&(l.value=k?parseInt(k):1),D())}),(a,t)=>{var R,W;const o=de,y=ue,L=ve,ce=ge;return i(),c("main",xe,[e("nav",Le,[e("div",Ne,[e("ol",Se,[e("li",Ae,[g(o,{to:"/"},{default:p(()=>t[1]||(t[1]=[v(" HOME ")])),_:1})]),e("li",Ve,[g(o,{to:`/${S.value.slug}`},{default:p(()=>[v(d(S.value.name.toUpperCase()),1)]),_:1},8,["to"])]),e("li",Me,d(u.value.name),1)])])]),r(P)&&!m.value.length?(i(),V(y,{key:0})):w("",!0),(!m.value.length||!((R=S.value)!=null&&R.active))&&r(P)==!1?(i(),V(L,{key:1})):w("",!0),Q(e("div",Be,[e("div",Te,[e("div",$e,[e("div",De,[e("div",Ee,[e("div",Oe,[e("div",Fe,[t[2]||(t[2]=v(" Showing ")),e("span",null,d(U.value)+" of "+d(T.value),1),t[3]||(t[3]=v(" Products "))])]),e("div",Ie,[e("div",je,[t[5]||(t[5]=e("label",{for:"sortby"},"Sort by:",-1)),e("div",qe,[Q(e("select",{id:"sortby","onUpdate:modelValue":t[0]||(t[0]=s=>A.value=s),name:"sortby",class:"form-control"},t[4]||(t[4]=[ke('<option value="">Default</option><option value="name_asc">Name A - Z</option><option value="name_desc">Name Z - A</option><option value="created_at_asc">Latest First</option><option value="created_at_desc">Oldest First</option>',5)]),512),[[ye,A.value]])])])])]),e("div",ze,[r(P)&&m.value.length?(i(),V(y,{key:0})):w("",!0),r(P)?w("",!0):(i(),c("div",He,[e("div",Ue,[(i(!0),c(M,null,B(G.value,s=>(i(),c("div",{key:s.id,class:"col-6 col-md-3 col-lg-2 col-xl-2"},[e("div",Ze,[e("figure",Ge,[g(o,{to:("getProductLink"in a?a.getProductLink:r(E))(s)},{default:p(()=>[g(ce,{src:("assets"in a?a.assets:r(me))(s.main_image_path),alt:s.name,format:"webp",quality:"80",loading:"lazy",class:"w-full h-auto object-cover product-image"},null,8,["src","alt"])]),_:2},1032,["to"]),t[7]||(t[7]=e("div",{class:"product-action-vertical"},null,-1)),e("div",Re,[e("button",{type:"button",class:"btn-product btn-cart",onClick:C=>("addToCart"in a?a.addToCart:r(pe))(s)},t[6]||(t[6]=[e("span",null,"Add to Cart",-1)]),8,We)])]),e("div",Je,[e("div",Ke,[g(o,{to:("getProductLink"in a?a.getProductLink:r(E))(s)},{default:p(()=>{var C;return[v(d((C=s.product_brand)==null?void 0:C.name),1)]}),_:2},1032,["to"])]),e("h3",Qe,[g(o,{to:("getProductLink"in a?a.getProductLink:r(E))(s)},{default:p(()=>[v(d(s.name),1)]),_:2},1032,["to"])]),t[8]||(t[8]=e("div",{class:"ratings-container"},null,-1))])])]))),128))])])),e("nav",Xe,[e("ul",Ye,[e("li",{class:I(["page-item",{disabled:l.value===1}])},[g(o,{class:"page-link page-link-prev",to:("getCategoryLink"in a?a.getCategoryLink:r(O))(u.value.id,u.value.name,l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:se},{default:p(()=>t[9]||(t[9]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),v(" Prev ")])),_:1},8,["to"])],2),(i(!0),c(M,null,B(re.value,s=>(i(),c("li",{key:s,class:I(["page-item",{active:s===l.value}])},[ne(s)?(i(),V(o,{key:0,class:"page-link",to:("getCategoryLink"in a?a.getCategoryLink:r(O))(u.value.id,u.value.name,s),onClick:C=>le(s)},{default:p(()=>[v(d(s),1)]),_:2},1032,["to","onClick"])):w("",!0)],2))),128)),e("li",et,"of "+d(x.value),1),e("li",{class:I(["page-item",{disabled:l.value===x.value}])},[g(o,{class:"page-link page-link-next",to:("getCategoryLink"in a?a.getCategoryLink:r(O))(u.value.id,u.value.name,l.value+1),"aria-label":"Next",onClick:oe},{default:p(()=>t[10]||(t[10]=[v(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])]),e("aside",tt,[e("div",at,[e("div",{class:"widget widget-clean"},[t[11]||(t[11]=e("label",null,"Filters:",-1)),e("button",{class:"btn btn-primary btn-sm sidebar-filter-clear",onClick:ae}," Clean All ")]),$.value.length?(i(),c("div",st,[t[12]||(t[12]=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e("div",ot,[e("div",lt,[e("div",it,[(i(!0),c(M,null,B($.value,s=>(i(),c("div",{key:s.id,class:"filter-item"},[e("div",nt,[e("input",{id:"cat-"+s.id,type:"checkbox",class:"custom-control-input",value:s.id,onChange:C=>ee(s.id)},null,40,rt),e("label",{class:"custom-control-label",for:"cat-"+s.id},d(s.name),9,ct)]),e("span",dt,d(s.category_products_count),1)]))),128))])])])])):w("",!0),e("div",ut,[t[13]||(t[13]=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e("div",vt,[e("div",gt,[e("div",pt,[(i(!0),c(M,null,B(Z.value,s=>(i(),c("div",{key:s.id,class:"filter-item"},[e("div",mt,[e("input",{id:"brand-"+s.product_brand.id,type:"checkbox",class:"custom-control-input",value:s.product_brand.id,onChange:C=>te(s.product_brand.id)},null,40,_t),e("label",{class:"custom-control-label",for:"brand-"+s.product_brand.id},d(s.product_brand.name),9,ht)])]))),128))])])])])])])])])],512),[[fe,!r(P)&&((W=S.value)==null?void 0:W.active)||m.value.length]])])}}};export{Vt as default};
