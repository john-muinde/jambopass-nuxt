import{_ as ne}from"./DiX9QcOE.js";import{_ as re}from"./xZHzdsY3.js";import{_ as de}from"./HvgV4h_z.js";import{c as R,g as O,a as ce,b as M,d as ue}from"./CGcZhe3G.js";import{a as ve}from"./Cr3VIkzR.js";import{u as me,r as i,e as F,f as ge,g as pe,h as _e,c as r,a as e,b as m,w as d,t as c,o as n,d as u,i as b,j as z,k as be,v as he,F as P,l as L,n as T,m as fe}from"./DqP3LHpI.js";import{u as ye}from"./DrFZB5Ui.js";import{u as ke}from"./BBLMdrEF.js";import{u as Ce}from"./BDNeig0V.js";import"./_O3UyVST.js";const Pe={class:"main"},we={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},xe={class:"container d-flex align-items-center"},Le={class:"breadcrumb"},Ne={class:"breadcrumb-item"},Ae={class:"breadcrumb-item"},$e={class:"breadcrumb-item active","aria-current":"page"},Se={class:"page-content"},Te={class:"container"},Ve={class:"row"},Be={class:"col-lg-10"},Oe={key:0,class:"error-content"},Me={class:"error-actions"},Fe={class:"toolbox"},ze={class:"toolbox-left"},Ie={class:"toolbox-info"},Ee={class:"toolbox-right"},je={class:"toolbox-sort"},qe={class:"select-custom"},He={class:"products mb-3 products-section"},Je={class:"row"},Ue={class:"product product-7 text-center"},We={class:"product-media"},Ze={class:"product-action"},Re=["onClick"],Ge={class:"product-body"},Ke={class:"product-cat"},Qe={class:"product-title"},Xe={"aria-label":"Page navigation"},Ye={class:"pagination justify-content-center"},De={class:"page-item-total"},et={class:"col-lg-2 order-lg-first"},tt={class:"sidebar sidebar-shop sidebar-shop-category"},st={key:0,class:"widget widget-collapsible"},at={id:"widget-1",class:"show"},ot={class:"widget-body"},lt={class:"filter-items filter-items-count"},it={class:"custom-control custom-checkbox"},nt=["id","value","disabled","onChange"],rt=["for"],dt={class:"item-count"},ct={key:1,class:"count-shimmer shimmer"},ut={class:"widget widget-collapsible"},vt={id:"widget-4",class:"show"},mt={class:"widget-body"},gt={class:"filter-items"},pt={class:"custom-control custom-checkbox"},_t=["id","value","onChange"],bt=["for"],ht={class:"products mb-3 products-section"},ft={class:"row"},Tt={__name:"[...slug] copy",async setup(yt){let N,I;const A=me(),{segment:E,id:f}=A.params,{api:G}=ye(),j=Array.isArray(A.params.slug)?A.params.slug:[A.params.slug],K=j[0],y=j[2],g=i(!1),q=i(`${R(E)} - ${R(K)}`),l=i(y?parseInt(y):1),H=i(12),V=i(0),Q=i([]),J=i(0),h=i(f?parseInt(f):1),B=i([]),U=i([]),v=i([]),p=i({}),_=i({}),k=i(""),W=i([]),Z=F(()=>ue(E)),{data:X,refresh:$,error:Y}=([N,I]=ge(async()=>ke(`products-${h.value}-${l.value}-${JSON.stringify(p.value)}-${JSON.stringify(_.value)}-${k.value}`,async()=>{const s={[h.value]:p.value[h.value]||[]};p.value=s;const t={[h.value]:_.value[h.value]||[]};_.value=t;const o=await G.get("/api/get-products",{params:{page:l.value,per_page:H.value,category_id:h.value,checkedCategories:p.value,checkedBrands:_.value,selectedSortOption:k.value}});return{products:o.data.products.data,total:o.data.products.total,perPage:o.data.products.per_page,categories:o.data.categories,brands:o.data.brands,theCategory:o.data.the_category,totalPages:o.data.products.last_page}},{server:!0,lazy:!1,watch:[p,_,k,l]})),N=await N,I(),N);pe(X,s=>{s&&(Q.value=s.products,V.value=s.total,J.value=s.perPage,B.value=s.categories,U.value=s.brands,v.value=s.theCategory,W.value=s.products)});async function D(s){g.value=!0;let t=v.value.id;t in p.value||(p.value[t]=[]);const o=p.value[t];o.includes(s)?o.splice(o.indexOf(s),1):o.push(s);try{await $()}finally{g.value=!1}}async function ee(s){g.value=!0;let t=v.value.id;t in _.value||(_.value[t]=[]);const o=_.value[t];o.includes(s)?o.splice(o.indexOf(s),1):o.push(s);try{await $()}finally{g.value=!1}}async function te(){g.value=!0,document.querySelectorAll('input[type="checkbox"]').forEach(t=>{t.checked=!1}),p.value={},_.value={},k.value="";try{await $()}finally{g.value=!1}}const S=F(()=>Math.ceil(V.value/H.value)),se=F(()=>{const s=[];let o=Math.max(1,l.value-Math.floor(2.5)),w=Math.min(o+5-1,S.value);w-o<4&&(o=Math.max(1,w-5+1));for(let x=o;x<=w;x++)s.push(x);return s}),ae=()=>{l.value>1&&l.value--},oe=()=>{l.value<S.value&&l.value++},le=s=>{l.value=s},ie=s=>Number.isInteger(s);return _e(()=>{f!==""&&h.value!==f&&(l.value=1,h.value=f?parseInt(f):1,y!==""&&l.value!==y&&(l.value=y?parseInt(y):1),$())}),Ce({title:q,meta:[{name:"description",content:q}]}),(s,t)=>{const o=ne,w=re,x=de;return n(),r("main",Pe,[e("nav",we,[e("div",xe,[e("ol",Le,[e("li",Ne,[m(o,{to:"/"},{default:d(()=>t[2]||(t[2]=[u("HOME")])),_:1})]),e("li",Ae,[m(o,{to:`/${Z.value.slug}`},{default:d(()=>[u(c(Z.value.name.toUpperCase()),1)]),_:1},8,["to"])]),e("li",$e,c(v.value.name),1)])])]),e("div",Se,[e("div",Te,[m(x,null,{default:d(()=>[e("div",Ve,[e("div",Be,[b(Y)?(n(),r("div",Oe,[t[4]||(t[4]=e("i",{class:"icon-exclamation-circle text-danger mb-4",style:{"font-size":"3rem"}},null,-1)),t[5]||(t[5]=e("h2",{class:"error-title mb-3"},"No Products Found",-1)),t[6]||(t[6]=e("p",{class:"error-message text-muted mb-4"}," We couldn't find any products in this category. This might be because: ",-1)),t[7]||(t[7]=e("ul",{class:"error-reasons text-left mb-4 mx-auto",style:{"max-width":"400px"}},[e("li",null,"The selected filters might be too restrictive"),e("li",null,"The category might be temporarily empty"),e("li",null,"New products might be coming soon")],-1)),e("div",Me,[e("button",{class:"btn btn-primary me-3",onClick:t[0]||(t[0]=(...a)=>s.fetchProducts&&s.fetchProducts(...a))}," Try Again "),m(o,{to:"/",class:"btn btn-outline-primary"},{default:d(()=>t[3]||(t[3]=[u(" Browse All Products ")])),_:1})])])):z("",!0),e("div",Fe,[e("div",ze,[e("div",Ie,[t[8]||(t[8]=u(" Showing ")),e("span",null,c(J.value)+" of "+c(V.value),1),t[9]||(t[9]=u(" Products "))])]),e("div",Ee,[e("div",je,[t[11]||(t[11]=e("label",{for:"sortby"},"Sort by:",-1)),e("div",qe,[be(e("select",{id:"sortby","onUpdate:modelValue":t[1]||(t[1]=a=>k.value=a),name:"sortby",class:"form-control"},t[10]||(t[10]=[e("option",{value:""},"Default",-1),e("option",{value:"name_asc"},"Name A - Z",-1),e("option",{value:"name_desc"},"Name Z - A",-1),e("option",{value:"created_at_asc"},"Latest First",-1),e("option",{value:"created_at_desc"},"Oldest First",-1)]),512),[[he,k.value]])])])])]),e("div",He,[e("div",Je,[(n(!0),r(P,null,L(W.value,a=>(n(),r("div",{key:a.id,class:"col-6 col-md-3 col-lg-2 col-xl-2"},[e("div",Ue,[e("figure",We,[m(o,{to:("getProductLink"in s?s.getProductLink:b(O))(a)},{default:d(()=>[m(w,{src:("assets"in s?s.assets:b(ve))(a.main_image_path),alt:a.name,format:"webp",quality:"80",loading:"lazy",class:"w-full h-auto object-cover product-image"},null,8,["src","alt"])]),_:2},1032,["to"]),e("div",Ze,[e("button",{type:"button",class:"btn-product btn-cart",onClick:C=>("addToCart"in s?s.addToCart:b(ce))(a)},t[12]||(t[12]=[e("span",null,"Add to Cart",-1)]),8,Re)])]),e("div",Ge,[e("div",Ke,[m(o,{to:("getProductLink"in s?s.getProductLink:b(O))(a)},{default:d(()=>{var C;return[u(c((C=a.product_brand)==null?void 0:C.name),1)]}),_:2},1032,["to"])]),e("h3",Qe,[m(o,{to:("getProductLink"in s?s.getProductLink:b(O))(a)},{default:d(()=>[u(c(a.name),1)]),_:2},1032,["to"])])])])]))),128))])]),e("nav",Xe,[e("ul",Ye,[e("li",{class:T(["page-item",{disabled:l.value===1}])},[m(o,{class:"page-link page-link-prev",to:("getCategoryLink"in s?s.getCategoryLink:b(M))(v.value.id,v.value.name,l.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:ae},{default:d(()=>t[13]||(t[13]=[e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-left"})],-1),u(" Prev ")])),_:1},8,["to"])],2),(n(!0),r(P,null,L(se.value,a=>(n(),r("li",{key:a,class:T(["page-item",{active:a===l.value}])},[ie(a)?(n(),fe(o,{key:0,class:"page-link",to:("getCategoryLink"in s?s.getCategoryLink:b(M))(v.value.id,v.value.name,a),onClick:C=>le(a)},{default:d(()=>[u(c(a),1)]),_:2},1032,["to","onClick"])):z("",!0)],2))),128)),e("li",De,"of "+c(S.value),1),e("li",{class:T(["page-item",{disabled:l.value===S.value}])},[m(o,{class:"page-link page-link-next",to:("getCategoryLink"in s?s.getCategoryLink:b(M))(v.value.id,v.value.name,l.value+1),"aria-label":"Next",onClick:oe},{default:d(()=>t[14]||(t[14]=[u(" Next "),e("span",{"aria-hidden":"true"},[e("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])]),e("aside",et,[e("div",tt,[e("div",{class:"widget widget-clean"},[t[15]||(t[15]=e("label",null,"Filters:",-1)),e("button",{class:"btn btn-primary btn-sm sidebar-filter-clear",onClick:te}," Clean All ")]),B.value.length?(n(),r("div",st,[t[16]||(t[16]=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e("div",at,[e("div",ot,[e("div",lt,[(n(!0),r(P,null,L(B.value,a=>(n(),r("div",{key:a.id,class:T(["filter-item",{"is-loading":g.value}])},[e("div",it,[e("input",{id:"cat-"+a.id,type:"checkbox",class:"custom-control-input",value:a.id,disabled:g.value,onChange:C=>D(a.id)},null,40,nt),e("label",{class:"custom-control-label",for:"cat-"+a.id},c(a.name),9,rt),e("span",dt,[g.value?(n(),r("span",ct)):(n(),r(P,{key:0},[u(c(a.category_products_count),1)],64))])])],2))),128))])])])])):z("",!0),e("div",ut,[t[17]||(t[17]=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e("div",vt,[e("div",mt,[e("div",gt,[(n(!0),r(P,null,L(U.value,a=>(n(),r("div",{key:a.id,class:"filter-item"},[e("div",pt,[e("input",{id:"brand-"+a.product_brand.id,type:"checkbox",class:"custom-control-input",value:a.product_brand.id,onChange:C=>ee(a.product_brand.id)},null,40,_t),e("label",{class:"custom-control-label",for:"brand-"+a.product_brand.id},c(a.product_brand.name),9,bt)])]))),128))])])])])])])])]),fallback:d(()=>[e("div",ht,[e("div",ft,[(n(),r(P,null,L(12,a=>e("div",{key:a,class:"col-6 col-md-3 col-lg-2 col-xl-2"},t[18]||(t[18]=[e("div",{class:"product product-7 text-center"},[e("div",{class:"product-media shimmer"},[e("div",{class:"product-image-shimmer"})]),e("div",{class:"product-body"},[e("div",{class:"product-cat"},[e("div",{class:"shimmer brand-shimmer"})]),e("div",{class:"product-title"},[e("div",{class:"shimmer title-shimmer"})])])],-1)]))),64))])])]),_:1})])])])}}};export{Tt as default};
