import{_ as $}from"./CXJHB5FL.js";import{_ as q}from"./DCFDQUdb.js";import{a as z}from"./DrkG6YK4.js";import{_ as H,Z as O,r as i,f as M,p as Z,x as T,A as G,c as u,a as t,b as w,w as v,s as h,j as g,F as C,i as V,n as P,t as B,o as l,h as J,d as _}from"./DGo4BcrA.js";import{u as K}from"./iSyhVELR.js";import{u as Q}from"./DAFlecIY.js";import"./D4fRzern.js";const U={class:"main"},X={class:"page-content"},Y={class:"container"},ee={class:"row"},te={class:"col-lg-10 offset-lg-1 in-the-news-section"},ae={key:3,class:"row justify-content-left"},se={class:"p-6 border rounded"},oe={class:"position-relative mb-2",style:{height:"216px"}},le=["href"],ne=["src","alt"],ie=["href"],re={class:"col-lg-12 blogs mt-3"},ce={"aria-label":"Page navigation"},ue={class:"pagination justify-content-center"},de={class:"page-item-total"},pe={__name:"in-the-news",setup(ge){K({title:"In The News",meta:[{name:"description",content:"Media Spotlight: Sheffield Making Waves in the News"}]});const c=O(),a=i(c.params.page?parseInt(c.params.page):1),x=i(12),N=i(0),f=i([]),b=i(c.params.id?parseInt(c.params.id):1),S=i([]),d=i(!1),L=i(null),{api:I}=Q(),y=async()=>{d.value=!0;try{const e=await I.get("/api/get-in-the-news",{params:{page:a.value,per_page:x.value,category_id:b.value}});f.value=e.data.data,N.value=e.data.total,d.value=!1}catch(e){d.value=!1,e.value=e,console.error(e)}},j=async()=>{try{const e=await I.get("/api/get-blog-sidebar",{});S.value=e.data.other_blogs}catch(e){console.error(e)}},k=e=>`/media/in-the-news/page/${e}`,p=M(()=>Math.ceil(N.value/x.value)),m=i([]),A=()=>{a.value>1&&a.value--},D=()=>{a.value<p.value&&a.value++},E=e=>{a.value=e},F=()=>{m.value=f.value},R=e=>Number.isInteger(e),W=M(()=>{const e=[];a.value>1&&e.push("Prev");let n=Math.max(1,a.value-Math.floor(5/2)),r=Math.min(n+5-1,p.value);r-n<4&&(n=Math.max(1,r-5+1));for(let s=n;s<=r;s++)e.push(s);return a.value<p.value&&e.push("Next"),e});return Z(()=>{y(),j()}),T(a,y),T(f,F),G(()=>{const e=c.params;c.query,e.id!==""&&b.value!==e.id&&(a.value=1,b.value=e.id?parseInt(e.id):1,e.page!==""&&a.value!==e.page&&(a.value=e.page?parseInt(e.page):1),y())}),(e,o)=>{const n=$,r=q;return l(),u("div",null,[t("main",U,[t("div",X,[t("div",Y,[t("div",ee,[t("div",te,[o[4]||(o[4]=t("h2",{class:"about-us-title"},"In the News",-1)),w(n,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:v(()=>o[0]||(o[0]=[t("i",{class:"icon-long-arrow-left"},null,-1),t("span",null,"Back to Media Center",-1)])),_:1}),o[5]||(o[5]=t("p",{class:"lead about-us-lead text-primary mb-3"}," Media Spotlight: Sheffield Making Waves in the News ",-1)),d.value?(l(),h(r,{key:0,type:"loading","content-type":"Articles In The News"})):g("",!0),!m.value.length&&!d.value?(l(),h(r,{key:1,type:"empty","content-type":"Our articles In The News"})):g("",!0),L.value?(l(),h(r,{key:2,type:"error","content-type":"Articles In The News"})):g("",!0),m.value.length?(l(),u("div",ae,[(l(!0),u(C,null,V(m.value,s=>(l(),u("div",{key:s.id,class:"col-12 col-md-6 col-lg-4 mb-2 blog-item"},[t("div",se,[t("div",oe,[t("a",{target:"_blank",class:"float-center",href:s.url},[t("img",{class:"w-100 h-100 rounded",style:{"object-fit":"cover"},src:("assets"in e?e.assets:J(z))(s.main_image_path),alt:s.name},null,8,ne)],8,le)]),t("a",{target:"_blank",class:"btn btn-primary ml-5 pl-4 mt-2 mb-2 float-center",style:{color:"white"},href:s.url},o[1]||(o[1]=[_(" Read More "),t("i",{class:"icon-long-arrow-right"},null,-1)]),8,ie)])]))),128)),t("div",re,[t("nav",ce,[t("ul",ue,[t("li",{class:P(["page-item",{disabled:a.value===1}])},[w(n,{class:"page-link page-link-prev",to:k(a.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:A},{default:v(()=>o[2]||(o[2]=[t("span",{"aria-hidden":"true"},[t("i",{class:"icon-long-arrow-left"})],-1),_(" Prev ")])),_:1},8,["to"])],2),(l(!0),u(C,null,V(W.value,s=>(l(),u("li",{key:s,class:P(["page-item",{active:s===a.value}])},[R(s)?(l(),h(n,{key:0,class:"page-link",to:k(s),onClick:me=>E(s)},{default:v(()=>[_(B(s),1)]),_:2},1032,["to","onClick"])):g("",!0)],2))),128)),t("li",de,"of "+B(p.value),1),t("li",{class:P(["page-item",{disabled:a.value===p.value}])},[w(n,{class:"page-link page-link-next",to:k(a.value+1),"aria-label":"Next",onClick:D},{default:v(()=>o[3]||(o[3]=[_(" Next "),t("span",{"aria-hidden":"true"},[t("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):g("",!0)])])])])])])}}},we=H(pe,[["__scopeId","data-v-a6de84a6"]]);export{we as default};
