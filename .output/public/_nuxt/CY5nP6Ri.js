import{_ as me}from"./GKGdNLpJ.js";import{_ as he}from"./kEzf_zqW.js";import{_ as pe}from"./CU5OoYZV.js";import{e as _e,n as ge,u as re,f as H,g as q,h as ve,i as fe,j as be,r as ye,k as ke,l as Ce,o as h,c as p,a as e,b as C,w as S,d as L,t as w,m as c,T as Se,F as A,p as j,q as we,v as Pe,s as $e,x as ie,y as Fe,_ as Le}from"./CMXepUjz.js";import{a as ne}from"./C6-auSY3.js";import{u as le,a as xe}from"./x2IYLL8H.js";import{u as Be}from"./3CRb6tgr.js";import{u as Oe}from"./zZhoa2Za.js";const Ae=_e("products",{state:()=>({isFilterLoading:!1,checkedCategories:{},checkedBrands:{},selectedSortOption:"",currentPage:1,perPage:12,trackApiCalls:0}),actions:{setIsFilterLoading(t){this.$patch(s=>{s.isFilterLoading=t})},setCheckedCategories(t){this.$patch(s=>{s.checkedCategories={...t}})},async addCategoryFilter(t,s){this.$patch(n=>{n.checkedCategories[t]||(n.checkedCategories[t]=[]),n.checkedCategories[t].includes(s)||(n.checkedCategories[t]=[...n.checkedCategories[t],s])})},async removeCategoryFilter(t,s){this.$patch(n=>{n.checkedCategories[t]&&(n.checkedCategories[t]=n.checkedCategories[t].filter(y=>y!==s))})},setCheckedBrands(t){this.$patch(s=>{s.checkedBrands={...t}})},async addBrandFilter(t,s){this.$patch(n=>{n.checkedBrands[t]||(n.checkedBrands[t]=[]),n.checkedBrands[t].includes(s)||(n.checkedBrands[t]=[...n.checkedBrands[t],s])})},async removeBrandFilter(t,s){this.$patch(n=>{n.checkedBrands[t]&&(n.checkedBrands[t]=n.checkedBrands[t].filter(y=>y!==s))})},setSortOption(t){this.$patch(s=>{s.selectedSortOption=t})},setCurrentPage(t){this.$patch(s=>{s.currentPage=t})},incrementApiCalls(){this.$patch(t=>{t.trackApiCalls++})},resetFilters(){this.$patch(t=>{t.checkedCategories={},t.checkedBrands={},t.selectedSortOption="",t.currentPage=1})},async applyFilters(t,s,n){if(!this.isFilterLoading){this.setIsFilterLoading(!0);try{await Promise.all([this.setCurrentPage(1),s.push(n("page=1"))]),this.incrementApiCalls()}catch(y){console.error("Error applying filters:",y)}finally{await ge(),this.setIsFilterLoading(!1)}}}},getters:{getFilters:t=>({...t,checkedCategories:t.checkedCategories,checkedBrands:t.checkedBrands}),hasActiveFilters:t=>{const s=Object.values(t.checkedCategories).some(y=>y.length>0),n=Object.values(t.checkedBrands).some(y=>y.length>0);return s||n||!!t.selectedSortOption},getActiveCategoryFilters:t=>s=>[...t.checkedCategories[s]||[]],getActiveBrandFilters:t=>s=>[...t.checkedBrands[s]||[]],getCurrentPageFilters:t=>({page:t.currentPage,perPage:t.perPage})}}),Te=(t,s)=>{const n=re(),{generateSeoMeta:y,generateHeadInput:Z,generateContentMetaTags:$,config:T}=le(),N=()=>{var u,r,d,g;const _=(r=(u=t.value)==null?void 0:u.brands)==null?void 0:r.map(k=>{var f;return(f=k.product_brand)==null?void 0:f.name}).filter(Boolean).slice(0,3).join(", "),v=(g=(d=t.value)==null?void 0:d.theCategory)==null?void 0:g.name,m=s==null?void 0:s.name;return`Explore our selection of ${v} products in the ${m} category. 
            Browse top brands like ${_} and more. 
            Professional ${m.toLowerCase()} solutions by Sheffield Steel Systems in East Africa.`},E=H(()=>{var _,v,m,u,r,d,g,k,f,x,I;return $({type:"productList",content:{name:`${(v=(_=t.value)==null?void 0:_.theCategory)==null?void 0:v.name} - ${s==null?void 0:s.name} Products`,description:N(),keywords:`${s==null?void 0:s.keywords}, 
                  ${(u=(m=t.value)==null?void 0:m.theCategory)==null?void 0:u.name}, 
                  ${(d=(r=t.value)==null?void 0:r.brands)==null?void 0:d.map(z=>{var F;return(F=z.product_brand)==null?void 0:F.name}).join(", ")},
                  ${(k=(g=t.value)==null?void 0:g.products)==null?void 0:k.map(z=>z.name).join(", ")}`,main_image_path:(I=(x=(f=t.value)==null?void 0:f.products)==null?void 0:x[0])==null?void 0:I.main_image_path}})}),G=H(()=>{var _,v,m,u,r;return{"@context":"https://schema.org","@type":"ItemList",name:`${(v=(_=t.value)==null?void 0:_.theCategory)==null?void 0:v.name} Products by Sheffield Steel Systems`,description:N(),numberOfItems:((m=t.value)==null?void 0:m.total)||0,itemListElement:((r=(u=t.value)==null?void 0:u.products)==null?void 0:r.map((d,g)=>{var k,f,x;return{"@type":"ListItem",position:g+1,item:{"@type":"Product",name:d.name,image:ne(d.main_image_path),url:q(d),brand:{"@type":"Brand",name:((k=d.product_brand)==null?void 0:k.name)||"Sheffield Steel Systems"},category:(x=(f=t.value)==null?void 0:f.theCategory)==null?void 0:x.name,description:d.description||`Professional ${d.name} by Sheffield Steel Systems`,manufacturer:{"@type":"Organization",name:"Sheffield Steel Systems","@id":"https://sheffieldafrica.com/#organization"},offers:{"@type":"Offer",availability:"https://schema.org/InStock",seller:{"@type":"Organization",name:"Sheffield Steel Systems","@id":"https://sheffieldafrica.com/#organization"}}}}}))||[]}}),l=H(()=>{var _,v;return{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,item:{"@id":T.url,name:"Home"}},{"@type":"ListItem",position:2,item:{"@id":`${T.url}/${s==null?void 0:s.slug}`,name:s==null?void 0:s.name}},{"@type":"ListItem",position:3,item:{"@id":T.url+n.fullPath,name:(v=(_=t.value)==null?void 0:_.theCategory)==null?void 0:v.name}}]}}),R=H(()=>{var _,v,m,u,r,d;return{"@context":"https://schema.org","@type":"FilterList",name:`Filters for ${(v=(_=t.value)==null?void 0:_.theCategory)==null?void 0:v.name}`,itemListElement:[{"@type":"FilterSection",name:"Categories",filterOptions:(u=(m=t.value)==null?void 0:m.categories)==null?void 0:u.map(g=>({"@type":"FilterOption",name:g.name,value:g.id}))},{"@type":"FilterSection",name:"Brands",filterOptions:(d=(r=t.value)==null?void 0:r.brands)==null?void 0:d.map(g=>{var k,f;return{"@type":"FilterOption",name:(k=g.product_brand)==null?void 0:k.name,value:(f=g.product_brand)==null?void 0:f.id}})}]}});return{metaTags:E,productListSchema:G,breadcrumbSchema:l,filterSchema:R}},Ne={class:"main"},Ee={"aria-label":"breadcrumb",class:"breadcrumb-nav border-0 mb-0"},Me={class:"container d-flex align-items-center"},je={class:"breadcrumb"},ze={class:"breadcrumb-item"},He={class:"breadcrumb-item"},Ie={class:"breadcrumb-item active","aria-current":"page"},Ve={class:"page-content"},qe={class:"container"},Ge={key:"loading",class:"products mb-3"},Re={class:"row"},Ue={key:"error",class:"error-content"},Ze={class:"error-reasons text-left mb-4 mx-auto",style:{"max-width":"400px"}},We={class:"error-actions"},Je={key:"content",class:"row"},Ke={class:"col-lg-10"},Qe={class:"toolbox"},Xe={class:"toolbox-left"},Ye={class:"toolbox-info"},De={class:"toolbox-right"},et={class:"toolbox-sort"},tt={class:"select-custom"},st={class:"products mb-3 products-section"},ot={class:"row"},at={class:"product product-7 text-center"},it={class:"product-media"},rt={class:"product-action"},nt=["onClick"],lt={class:"product-body"},ct={class:"product-cat"},dt={class:"product-title"},ut={"aria-label":"Page navigation"},mt={class:"pagination justify-content-center"},ht=["innerHTML"],pt={class:"col-lg-2 order-lg-first"},_t={class:"sidebar sidebar-shop sidebar-shop-category"},gt={key:0,class:"widget widget-collapsible"},vt={id:"widget-1",class:"show"},ft={class:"widget-body"},bt={class:"filter-items filter-items-count"},yt={class:"custom-control custom-checkbox"},kt=["id","checked","value","disabled","onChange"],Ct=["for"],St={class:"item-count"},wt={key:1,class:"count-shimmer shimmer"},Pt={class:"widget widget-collapsible"},$t={id:"widget-4",class:"show"},Ft={class:"widget-body"},Lt={class:"filter-items"},xt={class:"custom-control custom-checkbox"},Bt=["id","checked","value","onChange"],Ot=["for"],At={class:"products mb-3 products-section"},Tt={class:"row"},Nt=ve({__name:"[...slug]",async setup(t){let s,n;const{generateSeoMeta:y,generateHeadInput:Z}=le(),$=re(),T=fe(),{segment:N,id:E}=$.params,{api:G}=be(),l=Ae(),R=Array.isArray($.params.slug)?$.params.slug:[$.params.slug],[_,,v]=R,m=ye(E?parseInt(E):1),u=H(()=>ke(N)),{data:r,refresh:d,error:g,status:k}=([s,n]=Ce(async()=>Be(`products-${m.value}-${l.currentPage}`,async()=>{try{await new Promise(o=>setTimeout(o,300));const i=await G.get("/api/get-products",{params:{category_id:m.value,page:l.currentPage,per_page:l.perPage,checkedCategories:l.checkedCategories,checkedBrands:l.checkedBrands,selectedSortOption:l.selectedSortOption}});return{products:i.data.products.data,total:i.data.products.total,perPage:i.data.products.per_page,categories:i.data.categories,brands:i.data.brands,theCategory:i.data.the_category,totalPages:i.data.products.last_page,next_page_url:i.data.products.next_page_url,prev_page_url:i.data.products.prev_page_url,links:i.data.products.links}}catch(i){throw console.error("Error fetching products:",i),i}},{server:!0,immediate:!0,watch:[()=>l.currentPage,()=>l.checkedCategories,()=>l.checkedBrands,()=>l.selectedSortOption]})),s=await s,n(),s),{metaTags:f,productListSchema:x,breadcrumbSchema:I,filterSchema:z}=Te(r,u.value),F=i=>{const o=i==null?void 0:i.split("page=")[1];return i?`/${N}/${E}/${_}/page/${o}`:`/${N}/${E}/${_}`};Oe(()=>{var i,o,b,B,M;return{...Z($,[x.value,I.value,z.value]),title:(o=(i=r.value)==null?void 0:i.theCategory)!=null&&o.name?`${r.value.theCategory.name} - ${(b=u.value)==null?void 0:b.name} Products`:"Products",link:[...(B=r.value)!=null&&B.prev_page_url?[{rel:"prev",href:F(r.value.prev_page_url)}]:[],...(M=r.value)!=null&&M.next_page_url?[{rel:"next",href:F(r.value.next_page_url)}]:[]]}}),xe(y(f.value,$));const W=async(i,o)=>{var b,B;if((B=(b=r.value)==null?void 0:b.theCategory)!=null&&B.id){l.setIsFilterLoading(!0);try{const M=r.value.theCategory.id;await new Promise(V=>setTimeout(V,300)),await l.applyFilters(M,T,F),await d()}finally{l.setIsFilterLoading(!1)}}},ce=i=>W("category"),de=i=>W("brand"),ue=async()=>{l.setIsFilterLoading(!0);try{l.resetFilters(),await l.applyFilters(m.value,T,F),await d()}finally{l.setIsFilterLoading(!1)}};return(i,o)=>{var V,J,K;const b=me,B=he,M=pe;return h(),p("main",Ne,[e("nav",Ee,[e("div",Me,[e("ol",je,[e("li",ze,[C(b,{to:"/"},{default:S(()=>o[2]||(o[2]=[L("HOME")])),_:1})]),e("li",He,[C(b,{to:`/${(V=u.value)==null?void 0:V.slug}`},{default:S(()=>{var O;return[L(w((O=u.value)==null?void 0:O.name.toUpperCase()),1)]}),_:1},8,["to"])]),e("li",Ie,w((K=(J=c(r))==null?void 0:J.theCategory)==null?void 0:K.name),1)])])]),e("div",Ve,[e("div",qe,[C(M,null,{default:S(()=>[C(Se,{name:"fade",mode:"out-in",tag:"div",duration:300},{default:S(()=>{var O,Q,X,Y,D,ee,te,se,oe;return[c(k)==="pending"?(h(),p("div",Ge,[e("div",Re,[(h(),p(A,null,j(12,a=>e("div",{key:a,class:"col-6 col-md-3 col-lg-2 col-xl-2"},o[3]||(o[3]=[e("div",{class:"product product-7 text-center"},[e("div",{class:"product-media shimmer"},[e("div",{class:"product-image-shimmer"})]),e("div",{class:"product-body"},[e("div",{class:"product-cat"},[e("div",{class:"shimmer brand-shimmer"})]),e("div",{class:"product-title"},[e("div",{class:"shimmer title-shimmer"})])])],-1)]))),64))])])):c(g)||!((O=u.value)!=null&&O.active)?(h(),p("div",Ue,[o[8]||(o[8]=e("i",{class:"icon-exclamation-circle text-danger mb-4",style:{"font-size":"3rem"}},null,-1)),o[9]||(o[9]=e("h2",{class:"error-title mb-3"},"No Products Found",-1)),o[10]||(o[10]=e("p",{class:"error-message text-muted mb-4"}," We couldn't find any products in this category. This might be because: ",-1)),e("ul",Ze,[o[4]||(o[4]=e("li",null,"The selected filters might be too restrictive",-1)),o[5]||(o[5]=e("li",null,"The category might be temporarily empty",-1)),o[6]||(o[6]=e("li",null,"New products might be coming soon",-1)),e("li",null,w((Q=u.value)==null?void 0:Q.active),1)]),e("div",We,[e("button",{class:"btn btn-primary me-3",onClick:o[0]||(o[0]=()=>c(d)())}," Try Again "),C(b,{to:"/",class:"btn btn-outline-primary"},{default:S(()=>o[7]||(o[7]=[L(" Browse All Products ")])),_:1})])])):(h(),p("div",Je,[e("div",Ke,[e("div",null,[e("div",Qe,[e("div",Xe,[e("div",Ye,[o[11]||(o[11]=L(" Showing ")),e("span",null,w((X=c(r))==null?void 0:X.perPage)+" of "+w((Y=c(r))==null?void 0:Y.total),1),o[12]||(o[12]=L(" Products "))])]),e("div",De,[e("div",et,[o[14]||(o[14]=e("label",{for:"sortby"},"Sort by:",-1)),e("div",tt,[we(e("select",{id:"sortby","onUpdate:modelValue":o[1]||(o[1]=a=>c(l).selectedSortOption=a),name:"sortby",class:"form-control"},o[13]||(o[13]=[e("option",{value:""},"Default",-1),e("option",{value:"name_asc"},"Name A - Z",-1),e("option",{value:"name_desc"},"Name Z - A",-1),e("option",{value:"created_at_asc"}," Latest First ",-1),e("option",{value:"created_at_desc"}," Oldest First ",-1)]),512),[[Pe,c(l).selectedSortOption]])])])])]),e("div",st,[e("div",ot,[(h(!0),p(A,null,j((D=c(r))==null?void 0:D.products,a=>(h(),p("div",{key:a.id,class:"col-6 col-md-3 col-lg-2 col-xl-2"},[e("div",at,[e("figure",it,[C(b,{to:("getProductLink"in i?i.getProductLink:c(q))(a)},{default:S(()=>[C(B,{src:("assetsSync"in i?i.assetsSync:c(ne))(a.main_image_path),alt:a==null?void 0:a.name,format:"webp",quality:"80",loading:"lazy",class:"w-full h-auto object-cover product-image"},null,8,["src","alt"])]),_:2},1032,["to"]),e("div",rt,[e("button",{type:"button",class:"btn-product btn-cart",onClick:P=>("addToCart"in i?i.addToCart:c($e))(a)},o[15]||(o[15]=[e("span",null,"Add to Cart",-1)]),8,nt)])]),e("div",lt,[e("div",ct,[C(b,{to:("getProductLink"in i?i.getProductLink:c(q))(a)},{default:S(()=>{var P;return[L(w((P=a.product_brand)==null?void 0:P.name),1)]}),_:2},1032,["to"])]),e("h3",dt,[C(b,{to:("getProductLink"in i?i.getProductLink:c(q))(a)},{default:S(()=>[L(w(a==null?void 0:a.name),1)]),_:2},1032,["to"])])])])]))),128))])]),e("nav",ut,[e("ul",mt,[(h(!0),p(A,null,j((ee=c(r))==null?void 0:ee.links,a=>(h(),p("li",{key:a,class:ie(["page-item",{active:a==null?void 0:a.active}])},[C(b,{class:"page-link",to:F(a==null?void 0:a.url)},{default:S(()=>[e("span",{innerHTML:a==null?void 0:a.label},null,8,ht)]),_:2},1032,["to"])],2))),128))])])])]),e("aside",pt,[e("div",_t,[e("div",{class:"widget widget-clean"},[o[16]||(o[16]=e("label",null,"Filters:",-1)),e("button",{class:"btn btn-primary btn-sm sidebar-filter-clear",onClick:ue}," Clean All ")]),(te=c(r))!=null&&te.categories.length?(h(),p("div",gt,[o[17]||(o[17]=e("h3",{class:"widget-title"},[e("a",{"data-toggle":"collapse",href:"#widget-1",role:"button","aria-expanded":"true","aria-controls":"widget-1"}," Category ")],-1)),e("div",vt,[e("div",ft,[e("div",bt,[(h(!0),p(A,null,j((se=c(r))==null?void 0:se.categories,a=>{var P;return h(),p("div",{key:a.id,class:ie(["filter-item",{"is-loading":c(l).isFilterLoading}])},[e("div",yt,[e("input",{id:"cat-"+a.id,type:"checkbox",class:"custom-control-input",checked:(P=c(l).checkedCategories[m.value])==null?void 0:P.includes(a.id),value:a.id,disabled:c(l).isFilterLoading,onChange:U=>ce(a.id)},null,40,kt),e("label",{class:"custom-control-label",for:"cat-"+a.id},w(a==null?void 0:a.name),9,Ct),e("span",St,[c(l).isFilterLoading?(h(),p("span",wt)):(h(),p(A,{key:0},[L(w(a.category_products_count),1)],64))])])],2)}),128))])])])])):Fe("",!0),e("div",Pt,[o[18]||(o[18]=e("h3",{class:"widget-title"},[e("a",{href:"#widget-4",role:"button","aria-expanded":"true","aria-controls":"widget-4"}," Brand ")],-1)),e("div",$t,[e("div",Ft,[e("div",Lt,[(h(!0),p(A,null,j((oe=c(r))==null?void 0:oe.brands,a=>{var P,U,ae;return h(),p("div",{key:a.id,class:"filter-item"},[e("div",xt,[e("input",{id:"brand-"+a.product_brand.id,type:"checkbox",class:"custom-control-input",checked:(P=c(l).checkedBrands[m.value])==null?void 0:P.includes(a.product_brand.id),value:a.product_brand.id,onChange:Et=>de(a.product_brand.id)},null,40,Bt),e("label",{class:"custom-control-label",for:"brand-"+((U=a.product_brand)==null?void 0:U.id)},w((ae=a.product_brand)==null?void 0:ae.name),9,Ot)])])}),128))])])])])])])]))]}),fallback:S(()=>[e("div",At,[e("div",Tt,[(h(),p(A,null,j(12,O=>e("div",{key:O,class:"col-6 col-md-3 col-lg-2 col-xl-2"},o[19]||(o[19]=[e("div",{class:"product product-7 text-center"},[e("div",{class:"product-media shimmer"},[e("div",{class:"product-image-shimmer"})]),e("div",{class:"product-body"},[e("div",{class:"product-cat"},[e("div",{class:"shimmer brand-shimmer"})]),e("div",{class:"product-title"},[e("div",{class:"shimmer title-shimmer"})])])],-1)]))),64))])])]),_:1})]),_:1})])])])}}}),Rt=Le(Nt,[["__scopeId","data-v-fe65a232"]]);export{Rt as default};
