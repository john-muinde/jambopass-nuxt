import{_ as W}from"./BUdaeQQ-.js";import{_ as $,Y as z,r as i,e as M,g as H,f as C,L as O,B as Y,c as u,a as t,b as w,w as m,i as h,S as p,F as T,m as V,q as P,t as B,o as l,d as _}from"./BDUxOr-D.js";import{u as G}from"./B0i6G_qg.js";import{u as J}from"./iSt8HW-c.js";import"./CsZD2NvJ.js";const K={class:"main"},Q={class:"page-content"},U={class:"container"},X={class:"row"},Z={class:"col-lg-10 offset-lg-1 in-the-news-section"},ee={key:3,class:"row justify-content-left"},te={class:"p-6 border rounded"},ae={class:"position-relative mb-2",style:{height:"216px"}},se=["href"],oe=["src","alt"],le=["href"],ne={class:"col-lg-12 blogs mt-3"},ie={"aria-label":"Page navigation"},re={class:"pagination justify-content-center"},ce={class:"page-item-total"},ue={__name:"in-the-news",setup(de){G({title:"In The News",meta:[{name:"description",content:"Media Spotlight: Sheffield Making Waves in the News"}]});const c=z(),a=i(c.params.page?parseInt(c.params.page):1),x=i(12),N=i(0),f=i([]),b=i(c.params.id?parseInt(c.params.id):1),S=i([]),d=i(!1),L=i(null),{api:I}=J(),y=async()=>{d.value=!0;try{const e=await I.get("/api/get-in-the-news",{params:{page:a.value,per_page:x.value,category_id:b.value}});f.value=e.data.data,N.value=e.data.total,d.value=!1}catch(e){d.value=!1,e.value=e,console.error(e)}},j=async()=>{try{const e=await I.get("/api/get-blog-sidebar",{});S.value=e.data.other_blogs}catch(e){console.error(e)}},k=e=>`/media/in-the-news/page/${e}`,g=M(()=>Math.ceil(N.value/x.value)),v=i([]),A=()=>{a.value>1&&a.value--},q=()=>{a.value<g.value&&a.value++},D=e=>{a.value=e},E=()=>{v.value=f.value},F=e=>Number.isInteger(e),R=M(()=>{const e=[];a.value>1&&e.push("Prev");let n=Math.max(1,a.value-Math.floor(5/2)),r=Math.min(n+5-1,g.value);r-n<4&&(n=Math.max(1,r-5+1));for(let s=n;s<=r;s++)e.push(s);return a.value<g.value&&e.push("Next"),e});return H(()=>{y(),j()}),C(a,y),C(f,E),O(()=>{const e=c.params;c.query,e.id!==""&&b.value!==e.id&&(a.value=1,b.value=e.id?parseInt(e.id):1,e.page!==""&&a.value!==e.page&&(a.value=e.page?parseInt(e.page):1),y())}),(e,o)=>{const n=Y("router-link"),r=W;return l(),u("div",null,[t("main",K,[t("div",Q,[t("div",U,[t("div",X,[t("div",Z,[o[4]||(o[4]=t("h2",{class:"about-us-title"}," In the News ",-1)),w(n,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:m(()=>o[0]||(o[0]=[t("i",{class:"icon-long-arrow-left"},null,-1),t("span",null,"Back to Media Center",-1)])),_:1}),o[5]||(o[5]=t("p",{class:"lead about-us-lead text-primary mb-3"}," Media Spotlight: Sheffield Making Waves in the News ",-1)),d.value?(l(),h(r,{key:0,type:"loading","content-type":"Articles In The News"})):p("",!0),!v.value.length&&!d.value?(l(),h(r,{key:1,type:"empty","content-type":"Our articles In The News"})):p("",!0),L.value?(l(),h(r,{key:2,type:"error","content-type":"Articles In The News"})):p("",!0),v.value.length?(l(),u("div",ee,[(l(!0),u(T,null,V(v.value,s=>(l(),u("div",{key:s.id,class:"col-12 col-md-6 col-lg-4 mb-2 blog-item"},[t("div",te,[t("div",ae,[t("a",{target:"_blank",class:"float-center",href:s.url},[t("img",{class:"w-100 h-100 rounded",style:{"object-fit":"cover"},src:"/storage/"+s.main_image_path,alt:s.name},null,8,oe)],8,se)]),t("a",{target:"_blank",class:"btn btn-primary ml-5 pl-4 mt-2 mb-2 float-center",style:{color:"white"},href:s.url},o[1]||(o[1]=[_(" Read More "),t("i",{class:"icon-long-arrow-right"},null,-1)]),8,le)])]))),128)),t("div",ne,[t("nav",ie,[t("ul",re,[t("li",{class:P(["page-item",{disabled:a.value===1}])},[w(n,{class:"page-link page-link-prev",to:k(a.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:A},{default:m(()=>o[2]||(o[2]=[t("span",{"aria-hidden":"true"},[t("i",{class:"icon-long-arrow-left"})],-1),_(" Prev ")])),_:1},8,["to"])],2),(l(!0),u(T,null,V(R.value,s=>(l(),u("li",{key:s,class:P(["page-item",{active:s===a.value}])},[F(s)?(l(),h(n,{key:0,class:"page-link",to:k(s),onClick:ge=>D(s)},{default:m(()=>[_(B(s),1)]),_:2},1032,["to","onClick"])):p("",!0)],2))),128)),t("li",ce," of "+B(g.value),1),t("li",{class:P(["page-item",{disabled:a.value===g.value}])},[w(n,{class:"page-link page-link-next",to:k(a.value+1),"aria-label":"Next",onClick:q},{default:m(()=>o[3]||(o[3]=[_(" Next "),t("span",{"aria-hidden":"true"},[t("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):p("",!0)])])])])])])}}},fe=$(ue,[["__scopeId","data-v-ae25496c"]]);export{fe as default};
