import{_ as W}from"./Cfg5zRsE.js";import{a as $}from"./solGxQE-.js";import{_ as z,Y as H,r as i,e as M,g as O,f as C,L as Y,B as G,c as u,a,b as w,w as m,i as h,S as p,F as T,m as V,q as P,t as B,o as l,u as J,d as _}from"./Cq97AGyi.js";import{u as K}from"./CiLHNciw.js";import{u as Q}from"./C5dqfmPK.js";import"./coq8Xn1-.js";const U={class:"main"},X={class:"page-content"},Z={class:"container"},ee={class:"row"},ae={class:"col-lg-10 offset-lg-1 in-the-news-section"},te={key:3,class:"row justify-content-left"},se={class:"p-6 border rounded"},oe={class:"position-relative mb-2",style:{height:"216px"}},le=["href"],ne=["src","alt"],ie=["href"],re={class:"col-lg-12 blogs mt-3"},ce={"aria-label":"Page navigation"},ue={class:"pagination justify-content-center"},de={class:"page-item-total"},ge={__name:"in-the-news",setup(pe){K({title:"In The News",meta:[{name:"description",content:"Media Spotlight: Sheffield Making Waves in the News"}]});const c=H(),t=i(c.params.page?parseInt(c.params.page):1),x=i(12),N=i(0),f=i([]),b=i(c.params.id?parseInt(c.params.id):1),S=i([]),d=i(!1),L=i(null),{api:I}=Q(),y=async()=>{d.value=!0;try{const e=await I.get("/api/get-in-the-news",{params:{page:t.value,per_page:x.value,category_id:b.value}});f.value=e.data.data,N.value=e.data.total,d.value=!1}catch(e){d.value=!1,e.value=e,console.error(e)}},j=async()=>{try{const e=await I.get("/api/get-blog-sidebar",{});S.value=e.data.other_blogs}catch(e){console.error(e)}},k=e=>`/media/in-the-news/page/${e}`,g=M(()=>Math.ceil(N.value/x.value)),v=i([]),A=()=>{t.value>1&&t.value--},q=()=>{t.value<g.value&&t.value++},D=e=>{t.value=e},E=()=>{v.value=f.value},F=e=>Number.isInteger(e),R=M(()=>{const e=[];t.value>1&&e.push("Prev");let n=Math.max(1,t.value-Math.floor(5/2)),r=Math.min(n+5-1,g.value);r-n<4&&(n=Math.max(1,r-5+1));for(let s=n;s<=r;s++)e.push(s);return t.value<g.value&&e.push("Next"),e});return O(()=>{y(),j()}),C(t,y),C(f,E),Y(()=>{const e=c.params;c.query,e.id!==""&&b.value!==e.id&&(t.value=1,b.value=e.id?parseInt(e.id):1,e.page!==""&&t.value!==e.page&&(t.value=e.page?parseInt(e.page):1),y())}),(e,o)=>{const n=G("router-link"),r=W;return l(),u("div",null,[a("main",U,[a("div",X,[a("div",Z,[a("div",ee,[a("div",ae,[o[4]||(o[4]=a("h2",{class:"about-us-title"},"In the News",-1)),w(n,{to:"/media",class:"btn btn-primary btn-round btn-shadow float-right"},{default:m(()=>o[0]||(o[0]=[a("i",{class:"icon-long-arrow-left"},null,-1),a("span",null,"Back to Media Center",-1)])),_:1}),o[5]||(o[5]=a("p",{class:"lead about-us-lead text-primary mb-3"}," Media Spotlight: Sheffield Making Waves in the News ",-1)),d.value?(l(),h(r,{key:0,type:"loading","content-type":"Articles In The News"})):p("",!0),!v.value.length&&!d.value?(l(),h(r,{key:1,type:"empty","content-type":"Our articles In The News"})):p("",!0),L.value?(l(),h(r,{key:2,type:"error","content-type":"Articles In The News"})):p("",!0),v.value.length?(l(),u("div",te,[(l(!0),u(T,null,V(v.value,s=>(l(),u("div",{key:s.id,class:"col-12 col-md-6 col-lg-4 mb-2 blog-item"},[a("div",se,[a("div",oe,[a("a",{target:"_blank",class:"float-center",href:s.url},[a("img",{class:"w-100 h-100 rounded",style:{"object-fit":"cover"},src:("assets"in e?e.assets:J($))(s.main_image_path),alt:s.name},null,8,ne)],8,le)]),a("a",{target:"_blank",class:"btn btn-primary ml-5 pl-4 mt-2 mb-2 float-center",style:{color:"white"},href:s.url},o[1]||(o[1]=[_(" Read More "),a("i",{class:"icon-long-arrow-right"},null,-1)]),8,ie)])]))),128)),a("div",re,[a("nav",ce,[a("ul",ue,[a("li",{class:P(["page-item",{disabled:t.value===1}])},[w(n,{class:"page-link page-link-prev",to:k(t.value-1),"aria-label":"Previous",tabindex:"-1","aria-disabled":"true",onClick:A},{default:m(()=>o[2]||(o[2]=[a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-left"})],-1),_(" Prev ")])),_:1},8,["to"])],2),(l(!0),u(T,null,V(R.value,s=>(l(),u("li",{key:s,class:P(["page-item",{active:s===t.value}])},[F(s)?(l(),h(n,{key:0,class:"page-link",to:k(s),onClick:ve=>D(s)},{default:m(()=>[_(B(s),1)]),_:2},1032,["to","onClick"])):p("",!0)],2))),128)),a("li",de,"of "+B(g.value),1),a("li",{class:P(["page-item",{disabled:t.value===g.value}])},[w(n,{class:"page-link page-link-next",to:k(t.value+1),"aria-label":"Next",onClick:q},{default:m(()=>o[3]||(o[3]=[_(" Next "),a("span",{"aria-hidden":"true"},[a("i",{class:"icon-long-arrow-right"})],-1)])),_:1},8,["to"])],2)])])])])):p("",!0)])])])])])])}}},ke=z(ge,[["__scopeId","data-v-accad3ba"]]);export{ke as default};
